import{j as e,r as n,f as x}from"./index-Ck-_GQcj.js";import{u as j}from"./DataProvider-CYoF5J8u.js";function p(){const[t,l]=n.useState(!0),[c,s]=n.useState(!0),[i,h]=n.useState(!1),{getData:r,setData:a}=j({selected:6},t),[o,u]=n.useState(r().selected);return e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{Promise.resolve().then(()=>{a({selected:0}),u(r().selected)})},children:"Select None"}),e.jsxs("h3",{children:["Parent Component (concurrent=",t.toString(),")"]}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t,onChange:d=>l(d.target.checked)})," Enable Concurrent Mode"]})}),e.jsxs("div",{children:["Current selection (by state): ",r().selected]}),e.jsxs("div",{children:["Current selection (by action): ",o]}),e.jsxs("h3",{children:["Child Component 1 (by action, concurrent=",c.toString(),")"]}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:c,onChange:d=>s(d.target.checked)})," Enable Concurrent Mode"]})}),e.jsx(C,{parentSelected:r().selected,concurrentMode:c}),e.jsxs("h3",{children:["Child Component 2 (by action, concurrent=",i.toString(),")"]}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:i,onChange:d=>h(d.target.checked)})," Enable Concurrent Mode"]})}),e.jsx(C,{parentSelected:o,concurrentMode:i})]})}const C=({parentSelected:t,concurrentMode:l})=>{const c=n.useRef(t),s=n.useRef(l),[i,h]=n.useState(t),[r,a]=n.useState(`${t} + 1`);s.current=l;const o=u=>{h(()=>(c.current=u,u))};return n.useEffect(()=>{s.current?o(t):x.flushSync(()=>o(t)),s.current?a(`${c.current} + 1`):x.flushSync(()=>a(`${c.current} + 1`))},[t]),e.jsxs("div",{children:["Parent selection: ",r]})},f=()=>e.jsx(p,{});export{f as ReactUpgradeSample,f as default};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVhY3RVcGdyYWRlQ2hlY2tCb3hTYW1wbGUtRFk0MWxiLXUuanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wYWdlcy9SZWFjdFVwZ3JhZGVDaGVja0JveFNhbXBsZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VEYXRhUHJvdmlkZXJWMyBhcyB1c2VEYXRhUHJvdmlkZXIsIHVzZURhdGFQcm92aWRlclYyIGFzIHVzZURwIH0gZnJvbSBcIi4vYmF0Y2gvRGF0YVByb3ZpZGVyXCI7XG5pbXBvcnQgeyBmbHVzaFN5bmMgfSBmcm9tIFwicmVhY3QtZG9tXCI7XG5cbi8vIHIxN1xuLy8gLSBhbGwgc2V0U3RhdGUgd2lsbCBiZSBleGVjdXRlZCBpbW1lZGlhdGVseVxuLy8gcjE4IGNvbXBhdGlibGUgbW9kZVxuLy8gLSBzZXRTdGF0ZSBpbiBzeW5jIG1vZGUgd2lsbCBiZSBiYXRjaGVkXG4vLyAtIHNldFN0YXRlIGluIGFzeW5jIG1vZGUgd2lsbCBiZSBleGVjdXRlZCBpbW1lZGlhdGVseVxuLy8gcjE4IGNvbmN1cnJlbnQgbW9kZVxuLy8gLSBhbGwgc2V0U3RhdGUgd2lsbCBiZSBiYXRjaGVkXG5cbmZ1bmN0aW9uIFBhcmVudENvbXBvbmVudCgpIHtcbiAgICBjb25zdCBbcGFyZW50Q29uY3VycmVudE1vZGUsIHNldFBhcmVudENvbmN1cnJlbnRNb2RlXSA9IHVzZVN0YXRlKHRydWUpO1xuICAgIGNvbnN0IFtjaGlsZDFDb25jdXJyZW50TW9kZSwgc2V0Q2hpbGQxQ29uY3VycmVudE1vZGVdID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgY29uc3QgW2NoaWxkMkNvbmN1cnJlbnRNb2RlLCBzZXRDaGlsZDJDb25jdXJyZW50TW9kZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgLy8gY29uY3VycmVudCBtb2RlIGhlcmVcbiAgICBjb25zdCB7IGdldERhdGEsIHNldERhdGEgfSA9IHVzZURhdGFQcm92aWRlcih7IHNlbGVjdGVkOiA2IH0sIHBhcmVudENvbmN1cnJlbnRNb2RlKTtcbiAgICBjb25zdCBbc2VsZWN0ZWQsIHNldFNlbGVjdGVkXSA9IHVzZVN0YXRlKGdldERhdGEoKS5zZWxlY3RlZCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBmbHVzaFN5bmMgdG8gYm90aCwgaXQgaXMgbm90IHdvcmtpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldERhdGEoeyBzZWxlY3RlZDogMCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzc3VtaW5nIHRoZSBkYXRhIGlzIHVwZGF0ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZChnZXREYXRhKCkuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNlbGVjdCBOb25lXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxoMz5QYXJlbnQgQ29tcG9uZW50IChjb25jdXJyZW50PXtwYXJlbnRDb25jdXJyZW50TW9kZS50b1N0cmluZygpfSk8L2gzPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17cGFyZW50Q29uY3VycmVudE1vZGV9IFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRQYXJlbnRDb25jdXJyZW50TW9kZShlLnRhcmdldC5jaGVja2VkKX1cbiAgICAgICAgICAgICAgICAgICAgLz4gRW5hYmxlIENvbmN1cnJlbnQgTW9kZVxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+Q3VycmVudCBzZWxlY3Rpb24gKGJ5IHN0YXRlKToge2dldERhdGEoKS5zZWxlY3RlZH08L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+Q3VycmVudCBzZWxlY3Rpb24gKGJ5IGFjdGlvbik6IHtzZWxlY3RlZH08L2Rpdj5cbiAgICAgICAgICAgIDxoMz5DaGlsZCBDb21wb25lbnQgMSAoYnkgYWN0aW9uLCBjb25jdXJyZW50PXtjaGlsZDFDb25jdXJyZW50TW9kZS50b1N0cmluZygpfSk8L2gzPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y2hpbGQxQ29uY3VycmVudE1vZGV9IFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDaGlsZDFDb25jdXJyZW50TW9kZShlLnRhcmdldC5jaGVja2VkKX1cbiAgICAgICAgICAgICAgICAgICAgLz4gRW5hYmxlIENvbmN1cnJlbnQgTW9kZVxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxDaGlsZENvbXBvbmVudCBwYXJlbnRTZWxlY3RlZD17Z2V0RGF0YSgpLnNlbGVjdGVkfSBjb25jdXJyZW50TW9kZT17Y2hpbGQxQ29uY3VycmVudE1vZGV9IC8+XG4gICAgICAgICAgICA8aDM+Q2hpbGQgQ29tcG9uZW50IDIgKGJ5IGFjdGlvbiwgY29uY3VycmVudD17Y2hpbGQyQ29uY3VycmVudE1vZGUudG9TdHJpbmcoKX0pPC9oMz5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIiBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2NoaWxkMkNvbmN1cnJlbnRNb2RlfSBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0Q2hpbGQyQ29uY3VycmVudE1vZGUoZS50YXJnZXQuY2hlY2tlZCl9XG4gICAgICAgICAgICAgICAgICAgIC8+IEVuYWJsZSBDb25jdXJyZW50IE1vZGVcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8Q2hpbGRDb21wb25lbnQgcGFyZW50U2VsZWN0ZWQ9e3NlbGVjdGVkfSBjb25jdXJyZW50TW9kZT17Y2hpbGQyQ29uY3VycmVudE1vZGV9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbmNvbnN0IENoaWxkQ29tcG9uZW50ID0gKHsgcGFyZW50U2VsZWN0ZWQsIGNvbmN1cnJlbnRNb2RlIH06IHsgcGFyZW50U2VsZWN0ZWQ6IG51bWJlciwgY29uY3VycmVudE1vZGU/OiBib29sZWFuIH0pID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZFJlZiA9IHVzZVJlZihwYXJlbnRTZWxlY3RlZCk7XG4gICAgY29uc3QgY29uY3VycmVudE1vZGVSZWYgPSB1c2VSZWYoY29uY3VycmVudE1vZGUpO1xuICAgIGNvbnN0IFtfLCBzZXRTZWxlY3RlZF0gPSB1c2VTdGF0ZShwYXJlbnRTZWxlY3RlZCk7XG4gICAgY29uc3QgW3BhcmVudFNlbGVjdGlvbkRpc3BsYXksIHNldFBhcmVudFNlbGVjdGlvbkRpc3BsYXldID0gdXNlU3RhdGUoYCR7cGFyZW50U2VsZWN0ZWR9ICsgMWApO1xuXG4gICAgLy8gVXBkYXRlIHJlZiB3aGVuIGNvbmN1cnJlbnRNb2RlIGNoYW5nZXNcbiAgICBjb25jdXJyZW50TW9kZVJlZi5jdXJyZW50ID0gY29uY3VycmVudE1vZGU7XG5cbiAgICBjb25zdCBoYW5kbGVTZWxlY3RlZFVwZGF0ZSA9IChzZWxlY3RlZDogbnVtYmVyKSA9PiB7XG4gICAgICAgIHNldFNlbGVjdGVkKCgpID0+IHtcbiAgICAgICAgICAgIC8vIG5vdGU6IHRoaXMgbGluZSBpcyB3cm9uZyBpbiBjb25jdXJyZW50IG1vZGVcbiAgICAgICAgICAgIHNlbGVjdGVkUmVmLmN1cnJlbnQgPSBzZWxlY3RlZDtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZDtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25jdXJyZW50TW9kZVJlZi5jdXJyZW50ID8gaGFuZGxlU2VsZWN0ZWRVcGRhdGUocGFyZW50U2VsZWN0ZWQpIDogZmx1c2hTeW5jKCgpID0+IGhhbmRsZVNlbGVjdGVkVXBkYXRlKHBhcmVudFNlbGVjdGVkKSk7XG4gICAgICAgIGNvbmN1cnJlbnRNb2RlUmVmLmN1cnJlbnQgPyBzZXRQYXJlbnRTZWxlY3Rpb25EaXNwbGF5KGAke3NlbGVjdGVkUmVmLmN1cnJlbnR9ICsgMWApIDogZmx1c2hTeW5jKCgpID0+IHNldFBhcmVudFNlbGVjdGlvbkRpc3BsYXkoYCR7c2VsZWN0ZWRSZWYuY3VycmVudH0gKyAxYCkpO1xuICAgIH0sIFtwYXJlbnRTZWxlY3RlZF0pOyAvLyByZW1vdmVkIGNvbmN1cnJlbnRNb2RlIGZyb20gZGVwZW5kZW5jaWVzXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlBhcmVudCBzZWxlY3Rpb246IHtwYXJlbnRTZWxlY3Rpb25EaXNwbGF5fTwvZGl2PlxuICAgIClcbn1cblxuZXhwb3J0IGNvbnN0IFJlYWN0VXBncmFkZVNhbXBsZSA9ICgpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFBhcmVudENvbXBvbmVudCAvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSZWFjdFVwZ3JhZGVTYW1wbGU7XG4iXSwibmFtZXMiOlsiUGFyZW50Q29tcG9uZW50IiwicGFyZW50Q29uY3VycmVudE1vZGUiLCJzZXRQYXJlbnRDb25jdXJyZW50TW9kZSIsInVzZVN0YXRlIiwiY2hpbGQxQ29uY3VycmVudE1vZGUiLCJzZXRDaGlsZDFDb25jdXJyZW50TW9kZSIsImNoaWxkMkNvbmN1cnJlbnRNb2RlIiwic2V0Q2hpbGQyQ29uY3VycmVudE1vZGUiLCJnZXREYXRhIiwic2V0RGF0YSIsInVzZURhdGFQcm92aWRlciIsInNlbGVjdGVkIiwic2V0U2VsZWN0ZWQiLCJqc3giLCJqc3hzIiwiZSIsIkNoaWxkQ29tcG9uZW50IiwicGFyZW50U2VsZWN0ZWQiLCJjb25jdXJyZW50TW9kZSIsInNlbGVjdGVkUmVmIiwidXNlUmVmIiwiY29uY3VycmVudE1vZGVSZWYiLCJfIiwicGFyZW50U2VsZWN0aW9uRGlzcGxheSIsInNldFBhcmVudFNlbGVjdGlvbkRpc3BsYXkiLCJoYW5kbGVTZWxlY3RlZFVwZGF0ZSIsInVzZUVmZmVjdCIsImZsdXNoU3luYyIsIlJlYWN0VXBncmFkZVNhbXBsZSJdLCJtYXBwaW5ncyI6InFHQVlBLFNBQVNBLEdBQWtCLENBQ3ZCLEtBQU0sQ0FBQ0MsRUFBc0JDLENBQXVCLEVBQUlDLFdBQVMsRUFBSSxFQUMvRCxDQUFDQyxFQUFzQkMsQ0FBdUIsRUFBSUYsV0FBUyxFQUFJLEVBQy9ELENBQUNHLEVBQXNCQyxDQUF1QixFQUFJSixXQUFTLEVBQUssRUFFaEUsQ0FBRSxRQUFBSyxFQUFTLFFBQUFDLEdBQVlDLEVBQWdCLENBQUUsU0FBVSxHQUFLVCxDQUFvQixFQUM1RSxDQUFDVSxFQUFVQyxDQUFXLEVBQUlULEVBQVMsU0FBQUssRUFBQSxFQUFVLFFBQVEsRUFFM0QsY0FDSyxNQUNHLENBQUEsU0FBQSxDQUFBSyxFQUFBLElBQUMsU0FBQSxDQUNH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
